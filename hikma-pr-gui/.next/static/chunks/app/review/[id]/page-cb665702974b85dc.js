(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[951],{559:(e,s,a)=>{Promise.resolve().then(a.bind(a,2362))},2362:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var t=a(5155),r=a(2115),l=a(8999),i=a(6874),n=a.n(i);function d(){var e,s,a,i,d;let c=(0,l.useParams)(),[x,m]=(0,r.useState)(null),[o,h]=(0,r.useState)(!0),[g,u]=(0,r.useState)(null),[p,b]=(0,r.useState)("overview");(0,r.useEffect)(()=>{c.id&&j(c.id)},[c.id]);let j=async e=>{try{let s=await fetch("/api/reviews/".concat(e));if(!s.ok)throw Error("Failed to fetch review");let a=await s.json();m(a)}catch(e){u(e instanceof Error?e.message:"An error occurred")}finally{h(!1)}},N=e=>{let s="px-2 py-1 rounded text-xs font-medium";switch(e){case"LOW":return"".concat(s," bg-green-100 text-green-800");case"MEDIUM":return"".concat(s," bg-yellow-100 text-yellow-800");case"HIGH":return"".concat(s," bg-orange-100 text-orange-800");case"CRITICAL":return"".concat(s," bg-red-100 text-red-800");default:return"".concat(s," bg-gray-100 text-gray-800")}},v=e=>{let s="px-2 py-1 rounded text-xs font-medium";switch(e){case"LOW":return"".concat(s," bg-blue-100 text-blue-800");case"MEDIUM":return"".concat(s," bg-yellow-100 text-yellow-800");case"HIGH":return"".concat(s," bg-orange-100 text-orange-800");case"CRITICAL":return"".concat(s," bg-red-100 text-red-800");default:return"".concat(s," bg-gray-100 text-gray-800")}};if(o)return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,t.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-8"}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-4"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})]})]})})});if(g)return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,t.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-red-800",children:"Error"}),(0,t.jsx)("p",{className:"text-red-600",children:g}),(0,t.jsx)(n(),{href:"/",className:"mt-2 inline-block bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Back to Reviews"})]})})});if(!x)return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,t.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Review not found"}),(0,t.jsx)(n(),{href:"/",className:"mt-2 inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Back to Reviews"})]})})});let y=(e=>{let s=e.match(/github\.com\/([^/]+)\/([^/]+)\/pull\/(\d+)/);return s?{owner:s[1],repo:s[2],number:s[3]}:null})(x.prUrl),f=(d=x.state.progress)&&0!==d.total_passes?Math.round(d.completed_passes/d.total_passes*100):0,w=null==(e=x.state.synthesis_data)?void 0:e.decision,_=!!x.state.final_report;return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)(n(),{href:"/",className:"text-blue-600 hover:text-blue-800 mb-4 inline-block",children:"← Back to Reviews"}),(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:(null==(s=x.state.pr_details)?void 0:s.title)||"Untitled PR"}),y&&(0,t.jsxs)("p",{className:"text-gray-600 mb-4",children:[(0,t.jsxs)("span",{className:"font-medium",children:[y.owner,"/",y.repo]}),(0,t.jsx)("span",{className:"mx-2",children:"•"}),(0,t.jsxs)("span",{children:["PR #",y.number]}),(0,t.jsx)("span",{className:"mx-2",children:"•"}),(0,t.jsx)("span",{children:new Date(x.createdAt).toLocaleString()})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[_&&(0,t.jsx)("span",{className:(e=>{let s="px-3 py-1 rounded-full text-sm font-medium";switch(e){case"APPROVE":return"".concat(s," bg-green-100 text-green-800");case"REQUEST_CHANGES":return"".concat(s," bg-yellow-100 text-yellow-800");case"REJECT":return"".concat(s," bg-red-100 text-red-800");default:return"".concat(s," bg-gray-100 text-gray-800")}})(w),children:w||"PENDING"}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Progress"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(f,"%")}})}),(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[f,"%"]})]})]})]})]})]}),x.state.progress&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Analysis Progress"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[x.state.progress.completed_files,"/",x.state.progress.total_files]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Files Analyzed"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[x.state.progress.completed_chunks,"/",x.state.progress.total_chunks]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Code Chunks"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[x.state.progress.completed_passes,"/",x.state.progress.total_passes]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Analysis Passes"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,t.jsx)("div",{className:"border-b border-gray-200",children:(0,t.jsx)("nav",{className:"flex space-x-8 px-6",children:["overview","analysis","findings"].map(e=>(0,t.jsx)("button",{onClick:()=>b(e),className:"py-4 px-1 border-b-2 font-medium text-sm capitalize ".concat(p===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:e},e))})}),(0,t.jsxs)("div",{className:"p-6",children:["overview"===p&&(0,t.jsxs)("div",{className:"space-y-6",children:[(null==(a=x.state.pr_details)?void 0:a.body)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"PR Description"}),(0,t.jsx)("div",{className:"bg-gray-50 rounded p-4",children:(0,t.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-700",children:x.state.pr_details.body})})]}),x.state.final_report&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Final Review Report"}),(0,t.jsx)("div",{className:"bg-gray-50 rounded p-4",children:(0,t.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-700",children:x.state.final_report})})]}),(null==(i=x.state.synthesis_data)?void 0:i.overall_assessment)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Overall Assessment"}),(0,t.jsx)("div",{className:"bg-gray-50 rounded p-4",children:(0,t.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-700",children:x.state.synthesis_data.overall_assessment})})]})]}),"analysis"===p&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Code Analysis by File"}),x.chunkAnalyses&&x.chunkAnalyses.length>0?(0,t.jsx)("div",{className:"space-y-4",children:x.chunkAnalyses.map(e=>(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:e.filePath}),(0,t.jsx)("div",{className:"flex gap-2",children:e.analysisPasses.map(e=>(0,t.jsxs)("span",{className:N(e.riskLevel),children:[e.passType,": ",e.riskLevel]},e.id))})]}),e.analysisPasses.map(e=>(0,t.jsxs)("div",{className:"mb-4 last:mb-0",children:[(0,t.jsxs)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:[e.passType," Analysis"]}),e.analysis&&(0,t.jsx)("div",{className:"bg-gray-50 rounded p-3 text-sm",children:(0,t.jsx)("pre",{className:"whitespace-pre-wrap text-gray-700",children:e.analysis})})]},e.id))]},e.id))}):(0,t.jsx)("p",{className:"text-gray-500",children:"No code analysis available yet."})]}),"findings"===p&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Plugin Findings"}),x.pluginFindings&&x.pluginFindings.length>0?(0,t.jsx)("div",{className:"space-y-4",children:x.pluginFindings.map(e=>(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Plugin: ",e.pluginName," • File: ",e.filePath,e.lineNumber&&" • Line: ".concat(e.lineNumber)]})]}),(0,t.jsx)("span",{className:v(e.severity),children:e.severity})]}),e.description&&(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsx)("p",{className:"text-sm text-gray-700",children:e.description})}),e.suggestion&&(0,t.jsxs)("div",{className:"bg-blue-50 rounded p-3",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-blue-800 mb-1",children:"Suggestion:"}),(0,t.jsx)("p",{className:"text-sm text-blue-700",children:e.suggestion})]})]},e.id))}):(0,t.jsx)("p",{className:"text-gray-500",children:"No plugin findings available."})]})]})]}),x.error&&(0,t.jsxs)("div",{className:"mt-6 bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-red-800 mb-2",children:"Error"}),(0,t.jsx)("p",{className:"text-red-600",children:x.error})]})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[874,441,684,358],()=>s(559)),_N_E=e.O()}]);